<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"> <html> <head> <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"> <meta http-equiv="Content-Type" content="text/html; charset=gb2312"> <script type="text/javascript" src="dialog.js?v=15.3"> </script> <script type="text/javascript"> document.write("<link href='../skin/"+config.Skin+"/dialog.css?v="+EWEB.V+"' type='text/css' rel='stylesheet'>");var mx=lC("type","image").toLowerCase();var wS=lC("mode","2");var pQ=lC("savepathfilename","");var qE=lC("savefilename","");var qQ=lC("originalfilename","");var zT=lC("returnflag","2");var cZ="";var ge=false;var aa,HA,kV,jV,cu,FE;switch(mx){case "image":aa=lang["DlgIUploadImage"];HA=lang["DlgImgSource"];kV=config.AllowImageExt;jV=config.AllowImageSize;FE=((config.SYWZFlag=="2"||config.SYTPFlag=="2")?true:false);break;case "flash":aa=lang["DlgIUploadFlash"];HA=lang["DlgFlashSource"];kV=config.AllowFlashExt;jV=config.AllowFlashSize;break;case "media":aa=lang["DlgIUploadMedia"];HA=lang["DlgMediaSource"];kV=config.AllowMediaExt;jV=config.AllowMediaSize;break;default:mx="file";aa=lang["DlgIUploadFile"];HA=lang["DlgFileSource"];kV=config.AllowFileExt;jV=config.AllowFileSize;break;}cu=((parseFloat(jV)>0)?true:false);aa=lang["DlgIUpload"]+"("+aa+")";var bm=aa;document.write("<title>"+bm+"</title>");function bP(what){if(what=="url"){$("d_fromurl").disabled=false;if(config.AllowBrowse=="1"){$("d_browse").disabled=false;}$("d_checkfromurl").checked=true;if(cu){$("d_checkfromfile").checked=false;$("uploadfile").disabled=true;}}else{$("d_checkfromurl").checked=false;$("uploadfile").disabled=false;$("d_checkfromfile").checked=true;$("d_fromurl").disabled=true;if(config.AllowBrowse=="1"){$("d_browse").disabled=true;}}};function zL(an){he(false);bP('file');bB.Hide();$("dlg_pb_p").style.width="0%";$("dlg_pb_t").innerHTML="0%";ge=false;try{bX($("uploadfile"),md(an,kV,jV));}catch(e){}};function eH(){var km=$("d_fromurl").value;var qh=km.substr(km.lastIndexOf("/")+1);var nZ=$("d_filename").value;ep(pQ,km);ep(qE,qh);ep(qQ,nZ);if(cZ){var rF=cZ.substr(cZ.lastIndexOf("/")+1);ep(pQ,cZ);ep(qE,rF);ep(qQ,nZ);}parent.bV({"flag":"AfterIUpload","filecount":1,"savepathfilename":pQ,"savefilename":qE,"originalfilename":qQ,"type":mx});};function ep(gn,bv){if(!bv){return;}if(gn){try{var iJ=EWIN.parent.document.getElementById(gn);if(!iJ){iJ=EWIN.parent.document.getElementsByName(gn)[0];}if(iJ){if(zT=="1"){iJ.value=bv;}else{iJ.value=(iJ.value)?(iJ.value+"|"+bv):bv;}iJ.onchange();}}catch(e){}}};function ok(){if($("d_checkfromurl").checked){nB($("d_fromurl").value,"/");eH();}else{if(!iV($("uploadfile").value,kV)){zL("ext");return false;}if($("uploadfile").files){var bU=$("uploadfile").files[0];if(bU.size>parseInt(jV)*1024){zL("size");return false;}he(true);bB.Show();ge=true;var fX=tF();eG.oR(bU,{"filetype":mx,"sy":fX},function(eC){if(eC["state"]=="ok"){var cf=eC["originalname"];var gI=eC["url"];cZ=eC["slt"];$("d_fromurl").value=gI;$("d_filename").value=cf;eH();}else{zL(eC["errflag"]);return;}},function(e){var zv=Math.ceil(e.loaded*100/e.total)+"%";$("dlg_pb_p").style.width=zv;$("dlg_pb_t").innerHTML=zv;});}else{}}};function tF(){if(FE){if($("d_syflag").checked){return "1";}}return "";};function Lo(){if(ge){eG.wb();}parent.Cancel(true);};function he(b){$("d_checkfromfile").disabled=b;$("d_checkfromurl").disabled=b;$("d_fromurl").disabled=b;if(config.AllowBrowse=="1"){$("d_browse").disabled=b;}$("d_ok").disabled=b;zJ("d_ok",b);};function nB(aG,AO){$("d_filename").value=aG.substr(aG.lastIndexOf(AO)+1);};function aq(){lang.ag(document);if(!cu){bP("url");}else{bP("file");}if(wS=="0"||wS=="1"||wS=="2"){$("tab_normal").style.display="";}if(wS=="3"||wS=="4"||wS=="5"||wS=="6"){$("tab_mfu").style.display="";var rh=(wS=="1"||wS=="3"||wS=="5")?"0":"1";iU.Load(mx,$("tab_mfu"),"500px","250px",rh);}parent.ar(bm);if(cu&&document.documentMode==5){var vt=true;$("uploadfile").disabled=vt;$("uploadfile").disabled= !vt;}};function jS(dO,iq,bZ){if(bZ=="tab_mfu"){var rh=(wS=="1"||wS=="3"||wS=="5")?"0":"1";iU.Load(mx,$(bZ),"500px","250px",rh);}if(ck.iy[dO]){parent.pM(ck.iy[dO].Width,ck.iy[dO].Height);}else{parent.pM();}};function MFUReturn(GC){var Bv=0;for(var i=0;i<GC.length;i++){if(GC[i]["state"]=="ok"){Bv++;var nZ=GC[i]["uploadresult"]["originalname"];var km=GC[i]["uploadresult"]["url"];var qh=km.substring(km.lastIndexOf("/")+1);ep(pQ,km);ep(qE,qh);ep(qQ,nZ);cZ=GC[i]["uploadresult"]["slt"];if(cZ){var rF=cZ.substr(cZ.lastIndexOf("/")+1);ep(pQ,cZ);ep(qE,rF);ep(qQ,nZ);}}}parent.bV({"flag":"AfterIUpload","filecount":Bv,"savepathfilename":pQ,"savefilename":qE,"originalfilename":qQ,"type":mx});} </script> </head> <body onload="aq()"> <table border=0 cellpadding=0 cellspacing=5 id=tabDialogSize><tr><td> <script type="text/javascript"> if(config.MFUEnable=="1"){if(wS=="1"||wS=="2"){ck.lQ([[lang["DlgComTabNormal"],"tab_normal"],[lang["DlgComTabMFU"],"tab_mfu"]]);}else if(wS=="5"||wS=="6"){ck.lQ([[lang["DlgComTabMFU"],"tab_mfu"],[lang["DlgComTabNormal"],"tab_normal"]]);}} </script> <table id="tab_normal" border=0 cellpadding=0 cellspacing=0 align=center style="display:none"> <tr> <td> <fieldset> <script type="text/javascript"> document.write('<legend><span>'+HA+'</span></legend>'); </script> <table border=0 cellpadding=5 cellspacing=0 width="100%"> <tr><td> <table border=0 cellpadding=0 cellspacing=0 width="300px"><tr><td></td></tr></table> <table border=0 cellpadding=0 cellspacing=2 width="100%"> <script type="text/javascript"> if(cu){document.write("<tr>");document.write("<td noWrap width=\"20%\"><input type=radio id=\"d_checkfromfile\" value=\"1\" onclick=\"bP('file')\"><label for=d_checkfromfile>"+lang["DlgFromFile"]+"</label>:</td>");document.write("<td noWrap width=\"80%\">");document.write(lN(mx));document.write("</td>");document.write("</tr>");} </script> <tr> <td noWrap width="20%"><input type=radio id="d_checkfromurl" value="1" onclick="bP('url')"><label for=d_checkfromurl><span lang=DlgFromUrl></span></label>:</td> <td noWrap width="80%"> <script type="text/javascript"> if(config.AllowBrowse=="1"){document.write("<table border=0 cellpadding=0 cellspacing=0 width='100%'><tr><td width='100%'><input type=text id='d_fromurl' style='width:100%' size=20 value='http://'></td><td><input class='dlgBtnBrowse' type=button id='d_browse' onclick=\"nf('"+mx+"','fromurl')\"  value='"+lang["DlgBtnBrowse"]+"' align=absmiddle></td></tr></table>");}else{document.write("<input type=text id='d_fromurl' style='width:100%' size=40 value='http://'>");} </script> </td> </tr> </table> </td></tr> </table> </fieldset> </td> </tr> <tr><td height=5></td></tr> <tr><td> <table border=0 cellpadding=0 cellspacing=2 width="100%"> <tr> <script type="text/javascript"> if(FE){document.write('<td noWrap><input type=checkbox id=d_syflag value="1"><label for=d_syflag><span lang=DlgImgSYFlag></span></label></td>');} </script> <td noWrap><span lang=DlgComPB></span>:<div id=dlg_pb_c class="mfu_pb_c_gray" style="width:100px;"> <div id=dlg_pb_p class="mfu_pb_p" style="width:0%"></div> <div id=dlg_pb_t class="mfu_pb_t">0%</div> </div> </td> <td noWrap align=right><input type=submit class="dlgBtnCommon dlgBtn" value='' id="d_ok" onclick="ok()" lang=DlgBtnOK>&nbsp;<input type=button class="dlgBtnCommon dlgBtn" value='' onclick="Lo()" lang=DlgBtnCancel></td> </tr> </table> </td></tr> </table> <div id="tab_mfu" style="width:500px;height:250px;display:none"></div> </td></tr></table> <script type="text/javascript"> bB.OutHtml(lang["DlgComUploading"]); </script> <input type=hidden id=d_filename value=""> </body> </html> 